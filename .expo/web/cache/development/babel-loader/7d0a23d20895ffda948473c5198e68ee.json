{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"F:\\\\Projects\\\\Book Donation App\\\\book-santa-stage-13\\\\screens\\\\RecieverDetailsScreen.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Card, Header, Icon } from \"react-native-elements\";\nimport firebase from \"firebase\";\nimport { RFValue } from \"react-native-responsive-fontsize\";\nimport db from \"../config.js\";\n\nvar RecieverDetailsScreen = function (_Component) {\n  _inherits(RecieverDetailsScreen, _Component);\n\n  var _super = _createSuper(RecieverDetailsScreen);\n\n  function RecieverDetailsScreen(props) {\n    var _this;\n\n    _classCallCheck(this, RecieverDetailsScreen);\n\n    _this = _super.call(this, props);\n\n    _this.getUserDetails = function (userId) {\n      db.collection(\"users\").where(\"email_id\", \"==\", userId).get().then(function (snapshot) {\n        snapshot.forEach(function (doc) {\n          _this.setState({\n            userName: doc.data().first_name + \" \" + doc.data().last_name\n          });\n        });\n      });\n    };\n\n    _this.updateBookStatus = function () {\n      db.collection(\"all_donations\").add({\n        book_name: _this.state.bookName,\n        request_id: _this.state.requestId,\n        requested_by: _this.state.recieverName,\n        donor_id: _this.state.userId,\n        request_status: \"Donor Interested\"\n      });\n    };\n\n    _this.addNotification = function () {\n      var message = _this.state.userName + \" has shown interest in donating the book\";\n      db.collection(\"all_notifications\").add({\n        targeted_user_id: _this.state.recieverId,\n        donor_id: _this.state.userId,\n        request_id: _this.state.requestId,\n        book_name: _this.state.bookName,\n        date: firebase.firestore.FieldValue.serverTimestamp(),\n        notification_status: \"unread\",\n        message: message\n      });\n    };\n\n    _this.state = {\n      userId: firebase.auth().currentUser.email,\n      userName: \"\",\n      recieverId: _this.props.navigation.getParam(\"details\")[\"user_id\"],\n      requestId: _this.props.navigation.getParam(\"details\")[\"request_id\"],\n      bookName: _this.props.navigation.getParam(\"details\")[\"book_name\"],\n      bookImage: \"#\",\n      reason_for_requesting: _this.props.navigation.getParam(\"details\")[\"reason_to_request\"],\n      recieverName: \"\",\n      recieverContact: \"\",\n      recieverAddress: \"\",\n      recieverRequestDocId: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(RecieverDetailsScreen, [{\n    key: \"getRecieverDetails\",\n    value: function getRecieverDetails() {\n      var _this2 = this;\n\n      db.collection(\"users\").where(\"email_id\", \"==\", this.state.recieverId).get().then(function (snapshot) {\n        snapshot.forEach(function (doc) {\n          _this2.setState({\n            recieverName: doc.data().first_name,\n            recieverContact: doc.data().contact,\n            recieverAddress: doc.data().address\n          });\n        });\n      });\n      db.collection(\"requested_books\").where(\"request_id\", \"==\", this.state.requestId).get().then(function (snapshot) {\n        snapshot.forEach(function (doc) {\n          _this2.setState({\n            recieverRequestDocId: doc.id,\n            bookImage: doc.data().image_link\n          });\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getRecieverDetails();\n      this.getUserDetails(this.state.userId);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 0.1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }\n      }, React.createElement(Header, {\n        leftComponent: React.createElement(Icon, {\n          name: \"arrow-left\",\n          type: \"feather\",\n          color: \"#ffffff\",\n          onPress: function onPress() {\n            return _this3.props.navigation.goBack();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }\n        }),\n        centerComponent: {\n          text: \"Donate Books\",\n          style: {\n            color: \"#ffffff\",\n            fontSize: RFValue(20),\n            fontWeight: \"bold\"\n          }\n        },\n        backgroundColor: \"#32867d\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: {\n          flex: 0.9\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 0.3,\n          flexDirection: \"row\",\n          paddingTop: RFValue(30),\n          paddingLeft: RFValue(10)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 0.4\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }\n      }, React.createElement(Image, {\n        source: {\n          uri: this.state.bookImage\n        },\n        style: {\n          width: \"100%\",\n          height: \"100%\",\n          resizeMode: \"contain\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 15\n        }\n      })), React.createElement(View, {\n        style: {\n          flex: 0.6,\n          alignItems: \"center\",\n          justifyContent: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeight: \"500\",\n          fontSize: RFValue(25),\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 15\n        }\n      }, this.state.bookName), React.createElement(Text, {\n        style: {\n          fontWeight: \"400\",\n          fontSize: RFValue(15),\n          textAlign: \"center\",\n          marginTop: RFValue(15)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 15\n        }\n      }, this.state.reason_for_requesting))), React.createElement(View, {\n        style: {\n          flex: 0.7,\n          padding: RFValue(20)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 0.7,\n          justifyContent: 'center',\n          alignItems: 'center',\n          marginTop: RFValue(50),\n          borderWidth: 1,\n          borderColor: '#deeedd',\n          padding: RFValue(10)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeight: \"500\",\n          fontSize: RFValue(30)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 15\n        }\n      }, \"Reciever Information\"), React.createElement(Text, {\n        style: {\n          fontWeight: \"400\",\n          fontSize: RFValue(20),\n          marginTop: RFValue(30)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 15\n        }\n      }, \"Name : \", this.state.recieverName), React.createElement(Text, {\n        style: {\n          fontWeight: \"400\",\n          fontSize: RFValue(20),\n          marginTop: RFValue(30)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 15\n        }\n      }, \"Contact: \", this.state.recieverContact), React.createElement(Text, {\n        style: {\n          fontWeight: \"400\",\n          fontSize: RFValue(20),\n          marginTop: RFValue(30)\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 15\n        }\n      }, \"Address: \", this.state.recieverAddress)), React.createElement(View, {\n        style: {\n          flex: 0.3,\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }\n      }, this.state.recieverId !== this.state.userId ? React.createElement(TouchableOpacity, {\n        style: styles.button,\n        onPress: function onPress() {\n          _this3.updateBookStatus();\n\n          _this3.addNotification();\n\n          _this3.props.navigation.navigate(\"MyDonations\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 19\n        }\n      }, \"I want to Donate\")) : null))));\n    }\n  }]);\n\n  return RecieverDetailsScreen;\n}(Component);\n\nexport { RecieverDetailsScreen as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  buttonContainer: {\n    flex: 0.3,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  button: {\n    width: \"75%\",\n    height: RFValue(60),\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: RFValue(60),\n    backgroundColor: \"#ff5722\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 8\n    },\n    elevation: 16\n  }\n});","map":{"version":3,"sources":["F:/Projects/Book Donation App/book-santa-stage-13/screens/RecieverDetailsScreen.js"],"names":["React","Component","Card","Header","Icon","firebase","RFValue","db","RecieverDetailsScreen","props","getUserDetails","userId","collection","where","get","then","snapshot","forEach","doc","setState","userName","data","first_name","last_name","updateBookStatus","add","book_name","state","bookName","request_id","requestId","requested_by","recieverName","donor_id","request_status","addNotification","message","targeted_user_id","recieverId","date","firestore","FieldValue","serverTimestamp","notification_status","auth","currentUser","email","navigation","getParam","bookImage","reason_for_requesting","recieverContact","recieverAddress","recieverRequestDocId","contact","address","id","image_link","getRecieverDetails","flex","goBack","text","style","color","fontSize","fontWeight","flexDirection","paddingTop","paddingLeft","uri","width","height","resizeMode","alignItems","justifyContent","textAlign","marginTop","padding","borderWidth","borderColor","styles","button","navigate","StyleSheet","create","container","buttonContainer","borderRadius","backgroundColor","shadowColor","shadowOffset","elevation"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { View, Text, StyleSheet, TouchableOpacity, Image } from \"react-native\";\r\nimport { Card, Header, Icon } from \"react-native-elements\";\r\nimport firebase from \"firebase\";\r\nimport { RFValue } from \"react-native-responsive-fontsize\";\r\nimport db from \"../config.js\";\r\n\r\nexport default class RecieverDetailsScreen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userId: firebase.auth().currentUser.email,\r\n      userName: \"\",\r\n      recieverId: this.props.navigation.getParam(\"details\")[\"user_id\"],\r\n      requestId: this.props.navigation.getParam(\"details\")[\"request_id\"],\r\n      bookName: this.props.navigation.getParam(\"details\")[\"book_name\"],\r\n      bookImage: \"#\",\r\n      reason_for_requesting: this.props.navigation.getParam(\"details\")[\r\n        \"reason_to_request\"\r\n      ],\r\n      recieverName: \"\",\r\n      recieverContact: \"\",\r\n      recieverAddress: \"\",\r\n      recieverRequestDocId: \"\",\r\n    };\r\n  }\r\n\r\n  getRecieverDetails() {\r\n    db.collection(\"users\")\r\n      .where(\"email_id\", \"==\", this.state.recieverId)\r\n      .get()\r\n      .then((snapshot) => {\r\n        snapshot.forEach((doc) => {\r\n          this.setState({\r\n            recieverName: doc.data().first_name,\r\n            recieverContact: doc.data().contact,\r\n            recieverAddress: doc.data().address,\r\n          });\r\n        });\r\n      });\r\n\r\n    db.collection(\"requested_books\")\r\n      .where(\"request_id\", \"==\", this.state.requestId)\r\n      .get()\r\n      .then((snapshot) => {\r\n        snapshot.forEach((doc) => {\r\n          this.setState({\r\n            recieverRequestDocId: doc.id,\r\n            bookImage: doc.data().image_link,\r\n          });\r\n        });\r\n      });\r\n  }\r\n\r\n  getUserDetails = (userId) => {\r\n    db.collection(\"users\")\r\n      .where(\"email_id\", \"==\", userId)\r\n      .get()\r\n      .then((snapshot) => {\r\n        snapshot.forEach((doc) => {\r\n          this.setState({\r\n            userName: doc.data().first_name + \" \" + doc.data().last_name,\r\n          });\r\n        });\r\n      });\r\n  };\r\n\r\n  updateBookStatus = () => {\r\n    db.collection(\"all_donations\").add({\r\n      book_name: this.state.bookName,\r\n      request_id: this.state.requestId,\r\n      requested_by: this.state.recieverName,\r\n      donor_id: this.state.userId,\r\n      request_status: \"Donor Interested\",\r\n    });\r\n  };\r\n\r\n  addNotification = () => {\r\n    var message =\r\n      this.state.userName + \" has shown interest in donating the book\";\r\n    db.collection(\"all_notifications\").add({\r\n      targeted_user_id: this.state.recieverId,\r\n      donor_id: this.state.userId,\r\n      request_id: this.state.requestId,\r\n      book_name: this.state.bookName,\r\n      date: firebase.firestore.FieldValue.serverTimestamp(),\r\n      notification_status: \"unread\",\r\n      message: message,\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getRecieverDetails();\r\n    this.getUserDetails(this.state.userId);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <View style={{ flex: 1 }}>\r\n        <View style={{ flex: 0.1 }}>\r\n          <Header\r\n            leftComponent={\r\n              <Icon\r\n                name=\"arrow-left\"\r\n                type=\"feather\"\r\n                color=\"#ffffff\"\r\n                onPress={() => this.props.navigation.goBack()}\r\n              />\r\n            }\r\n            centerComponent={{\r\n              text: \"Donate Books\",\r\n              style: {\r\n                color: \"#ffffff\",\r\n                fontSize: RFValue(20),\r\n                fontWeight: \"bold\",\r\n              },\r\n            }}\r\n            backgroundColor=\"#32867d\"\r\n          />\r\n        </View>\r\n        <View style={{ flex: 0.9 }}>\r\n          <View\r\n            style={{\r\n              flex: 0.3,\r\n              flexDirection: \"row\",\r\n              paddingTop: RFValue(30),\r\n              paddingLeft: RFValue(10),\r\n            }}\r\n          >\r\n            <View style={{ flex: 0.4,}}>\r\n              <Image\r\n                source={{ uri: this.state.bookImage }}\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: \"100%\",\r\n                  resizeMode: \"contain\",\r\n                }}\r\n              />\r\n            </View>\r\n            <View\r\n              style={{\r\n                flex: 0.6,\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n              }}\r\n            >\r\n              <Text\r\n                style={{\r\n                  fontWeight: \"500\",\r\n                  fontSize: RFValue(25),\r\n                  textAlign: \"center\",\r\n                }}\r\n              >\r\n                {this.state.bookName}\r\n              </Text>\r\n              <Text\r\n                style={{\r\n                  fontWeight: \"400\",\r\n                  fontSize: RFValue(15),\r\n                  textAlign: \"center\",\r\n                  marginTop: RFValue(15),\r\n                }}\r\n              >\r\n                {this.state.reason_for_requesting}\r\n              </Text>\r\n            </View>\r\n          </View>\r\n          <View\r\n            style={{\r\n              flex: 0.7,\r\n              padding: RFValue(20),\r\n            }}\r\n          >\r\n            <View style={{ flex: 0.7 ,justifyContent:'center',alignItems:'center',marginTop:RFValue(50),borderWidth:1,borderColor:'#deeedd',padding:RFValue(10)}}>\r\n              <Text\r\n                style={{\r\n                  fontWeight: \"500\",\r\n                  fontSize: RFValue(30),\r\n                }}\r\n              >\r\n                Reciever Information\r\n              </Text>\r\n              <Text\r\n                style={{\r\n                  fontWeight: \"400\",\r\n                  fontSize: RFValue(20),\r\n                  marginTop: RFValue(30),\r\n                }}\r\n              >\r\n                Name : {this.state.recieverName}\r\n              </Text>\r\n              <Text\r\n                style={{\r\n                  fontWeight: \"400\",\r\n                  fontSize: RFValue(20),\r\n                  marginTop: RFValue(30),\r\n                }}\r\n              >\r\n                Contact: {this.state.recieverContact}\r\n              </Text>\r\n              <Text\r\n                style={{\r\n                  fontWeight: \"400\",\r\n                  fontSize: RFValue(20),\r\n                  marginTop: RFValue(30),\r\n                }}\r\n              >\r\n                Address: {this.state.recieverAddress}\r\n              </Text>\r\n            </View>\r\n            <View\r\n              style={{\r\n                flex: 0.3,\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              {this.state.recieverId !== this.state.userId ? (\r\n                <TouchableOpacity\r\n                  style={styles.button}\r\n                  onPress={() => {\r\n                    this.updateBookStatus();\r\n                    this.addNotification();\r\n                    this.props.navigation.navigate(\"MyDonations\");\r\n                  }}\r\n                >\r\n                  <Text>I want to Donate</Text>\r\n                </TouchableOpacity>\r\n              ) : null}\r\n            </View>\r\n          </View>\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n  buttonContainer: {\r\n    flex: 0.3,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  button: {\r\n    width: \"75%\",\r\n    height: RFValue(60),\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderRadius: RFValue(60),\r\n    backgroundColor: \"#ff5722\",\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 8,\r\n    },\r\n    elevation: 16,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}
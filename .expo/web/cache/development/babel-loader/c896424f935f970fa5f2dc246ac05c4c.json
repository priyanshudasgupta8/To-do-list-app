{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"F:\\\\Projects\\\\To-Do List App\\\\to-do-list\\\\screens\\\\MyDonationScreen.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Card, Icon, ListItem } from \"react-native-elements\";\nimport MyHeader from \"../components/MyHeader.js\";\nimport firebase from \"firebase\";\nimport db from \"../config.js\";\n\nvar MyDonationScreen = function (_Component) {\n  _inherits(MyDonationScreen, _Component);\n\n  var _super = _createSuper(MyDonationScreen);\n\n  function MyDonationScreen() {\n    var _this;\n\n    _classCallCheck(this, MyDonationScreen);\n\n    _this = _super.call(this);\n\n    _this.getDonorDetails = function (donorId) {\n      db.collection(\"users\").where(\"email_id\", \"==\", donorId).get().then(function (snapshot) {\n        snapshot.forEach(function (doc) {\n          _this.setState({\n            donorName: doc.data().first_name + \" \" + doc.data().last_name\n          });\n        });\n      });\n    };\n\n    _this.getAllDonations = function () {\n      _this.requestRef = db.collection(\"all_donations\").where(\"donor_id\", \"==\", _this.state.donorId).onSnapshot(function (snapshot) {\n        var allDonations = [];\n        snapshot.docs.map(function (doc) {\n          var donation = doc.data();\n          donation[\"doc_id\"] = doc.id;\n          allDonations.push(donation);\n        });\n\n        _this.setState({\n          allDonations: allDonations\n        });\n      });\n    };\n\n    _this.sendBook = function (bookDetails) {\n      if (bookDetails.request_status === \"Book Sent\") {\n        var requestStatus = \"Donor Interested\";\n        db.collection(\"all_donations\").doc(bookDetails.doc_id).update({\n          request_status: \"Donor Interested\"\n        });\n\n        _this.sendNotification(bookDetails, requestStatus);\n      } else {\n        var requestStatus = \"Book Sent\";\n        db.collection(\"all_donations\").doc(bookDetails.doc_id).update({\n          request_status: \"Book Sent\"\n        });\n\n        _this.sendNotification(bookDetails, requestStatus);\n      }\n    };\n\n    _this.sendNotification = function (bookDetails, requestStatus) {\n      var requestId = bookDetails.request_id;\n      var donorId = bookDetails.donor_id;\n      db.collection(\"all_notifications\").where(\"request_id\", \"==\", requestId).where(\"donor_id\", \"==\", donorId).get().then(function (snapshot) {\n        snapshot.forEach(function (doc) {\n          var message = \"\";\n\n          if (requestStatus === \"Book Sent\") {\n            message = _this.state.donorName + \" sent you book\";\n          } else {\n            message = _this.state.donorName + \" has shown interest in donating the book\";\n          }\n\n          db.collection(\"all_notifications\").doc(doc.id).update({\n            message: message,\n            notification_status: \"unread\",\n            date: firebase.firestore.FieldValue.serverTimestamp()\n          });\n        });\n      });\n    };\n\n    _this.keyExtractor = function (item, index) {\n      return index.toString();\n    };\n\n    _this.renderItem = function (_ref) {\n      var item = _ref.item,\n          i = _ref.i;\n      return React.createElement(ListItem, {\n        key: i,\n        title: item.book_name,\n        subtitle: \"Requested By : \" + item.requested_by + \"\\nStatus : \" + item.request_status,\n        leftElement: React.createElement(Icon, {\n          name: \"book\",\n          type: \"font-awesome\",\n          color: \"#696969\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 20\n          }\n        }),\n        titleStyle: {\n          color: \"black\",\n          fontWeight: \"bold\"\n        },\n        rightElement: React.createElement(TouchableOpacity, {\n          style: [styles.button, {\n            backgroundColor: item.request_status === \"Book Sent\" ? \"green\" : \"#ff5722\"\n          }],\n          onPress: function onPress() {\n            _this.sendBook(item);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 9\n          }\n        }, React.createElement(Text, {\n          style: {\n            color: \"#ffff\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 11\n          }\n        }, item.request_status === \"Book Sent\" ? \"Book Sent\" : \"Send Book\")),\n        bottomDivider: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 5\n        }\n      });\n    };\n\n    _this.state = {\n      donorId: firebase.auth().currentUser.email,\n      donorName: \"\",\n      allDonations: []\n    };\n    _this.requestRef = null;\n    return _this;\n  }\n\n  _createClass(MyDonationScreen, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getDonorDetails(this.state.donorId);\n      this.getAllDonations();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.requestRef();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 7\n        }\n      }, React.createElement(MyHeader, {\n        navigation: this.props.navigation,\n        title: \"My Donations\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 9\n        }\n      }, this.state.allDonations.length === 0 ? React.createElement(View, {\n        style: styles.subtitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 15\n        }\n      }, \"List of all book Donations\")) : React.createElement(FlatList, {\n        keyExtractor: this.keyExtractor,\n        data: this.state.allDonations,\n        renderItem: this.renderItem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }\n      })));\n    }\n  }]);\n\n  return MyDonationScreen;\n}(Component);\n\nMyDonationScreen.navigationOptions = {\n  header: null\n};\nexport { MyDonationScreen as default };\nvar styles = StyleSheet.create({\n  button: {\n    width: 100,\n    height: 30,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 8\n    },\n    elevation: 16\n  },\n  subtitle: {\n    flex: 1,\n    fontSize: 20,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"sources":["F:/Projects/To-Do List App/to-do-list/screens/MyDonationScreen.js"],"names":["React","Component","Card","Icon","ListItem","MyHeader","firebase","db","MyDonationScreen","getDonorDetails","donorId","collection","where","get","then","snapshot","forEach","doc","setState","donorName","data","first_name","last_name","getAllDonations","requestRef","state","onSnapshot","allDonations","docs","map","donation","id","push","sendBook","bookDetails","request_status","requestStatus","doc_id","update","sendNotification","requestId","request_id","donor_id","message","notification_status","date","firestore","FieldValue","serverTimestamp","keyExtractor","item","index","toString","renderItem","i","book_name","requested_by","color","fontWeight","styles","button","backgroundColor","auth","currentUser","email","flex","props","navigation","length","subtitle","fontSize","navigationOptions","header","StyleSheet","create","width","height","justifyContent","alignItems","shadowColor","shadowOffset","elevation"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  ScrollView,\r\n  FlatList,\r\n  StyleSheet,\r\n} from \"react-native\";\r\nimport { Card, Icon, ListItem } from \"react-native-elements\";\r\nimport MyHeader from \"../components/MyHeader.js\";\r\nimport firebase from \"firebase\";\r\nimport db from \"../config.js\";\r\n\r\nexport default class MyDonationScreen extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      donorId: firebase.auth().currentUser.email,\r\n      donorName: \"\",\r\n      allDonations: [],\r\n    };\r\n    this.requestRef = null;\r\n  }\r\n\r\n  static navigationOptions = { header: null };\r\n\r\n  getDonorDetails = (donorId) => {\r\n    db.collection(\"users\")\r\n      .where(\"email_id\", \"==\", donorId)\r\n      .get()\r\n      .then((snapshot) => {\r\n        snapshot.forEach((doc) => {\r\n          this.setState({\r\n            donorName: doc.data().first_name + \" \" + doc.data().last_name,\r\n          });\r\n        });\r\n      });\r\n  };\r\n\r\n  getAllDonations = () => {\r\n    this.requestRef = db\r\n      .collection(\"all_donations\")\r\n      .where(\"donor_id\", \"==\", this.state.donorId)\r\n      .onSnapshot((snapshot) => {\r\n        var allDonations = [];\r\n        snapshot.docs.map((doc) => {\r\n          var donation = doc.data();\r\n          donation[\"doc_id\"] = doc.id;\r\n          allDonations.push(donation);\r\n        });\r\n        this.setState({\r\n          allDonations: allDonations,\r\n        });\r\n      });\r\n  };\r\n\r\n  sendBook = (bookDetails) => {\r\n    if (bookDetails.request_status === \"Book Sent\") {\r\n      var requestStatus = \"Donor Interested\";\r\n      db.collection(\"all_donations\").doc(bookDetails.doc_id).update({\r\n        request_status: \"Donor Interested\",\r\n      });\r\n      this.sendNotification(bookDetails, requestStatus);\r\n    } else {\r\n      var requestStatus = \"Book Sent\";\r\n      db.collection(\"all_donations\").doc(bookDetails.doc_id).update({\r\n        request_status: \"Book Sent\",\r\n      });\r\n      this.sendNotification(bookDetails, requestStatus);\r\n    }\r\n  };\r\n\r\n  sendNotification = (bookDetails, requestStatus) => {\r\n    var requestId = bookDetails.request_id;\r\n    var donorId = bookDetails.donor_id;\r\n    db.collection(\"all_notifications\")\r\n      .where(\"request_id\", \"==\", requestId)\r\n      .where(\"donor_id\", \"==\", donorId)\r\n      .get()\r\n      .then((snapshot) => {\r\n        snapshot.forEach((doc) => {\r\n          var message = \"\";\r\n          if (requestStatus === \"Book Sent\") {\r\n            message = this.state.donorName + \" sent you book\";\r\n          } else {\r\n            message =\r\n              this.state.donorName + \" has shown interest in donating the book\";\r\n          }\r\n          db.collection(\"all_notifications\").doc(doc.id).update({\r\n            message: message,\r\n            notification_status: \"unread\",\r\n            date: firebase.firestore.FieldValue.serverTimestamp(),\r\n          });\r\n        });\r\n      });\r\n  };\r\n\r\n  keyExtractor = (item, index) => index.toString();\r\n\r\n  renderItem = ({ item, i }) => (\r\n    <ListItem\r\n      key={i}\r\n      title={item.book_name}\r\n      subtitle={\r\n        \"Requested By : \" +\r\n        item.requested_by +\r\n        \"\\nStatus : \" +\r\n        item.request_status\r\n      }\r\n      leftElement={<Icon name=\"book\" type=\"font-awesome\" color=\"#696969\" />}\r\n      titleStyle={{ color: \"black\", fontWeight: \"bold\" }}\r\n      rightElement={\r\n        <TouchableOpacity\r\n          style={[\r\n            styles.button,\r\n            {\r\n              backgroundColor:\r\n                item.request_status === \"Book Sent\" ? \"green\" : \"#ff5722\",\r\n            },\r\n          ]}\r\n          onPress={() => {\r\n            this.sendBook(item);\r\n          }}\r\n        >\r\n          <Text style={{ color: \"#ffff\" }}>\r\n            {item.request_status === \"Book Sent\" ? \"Book Sent\" : \"Send Book\"}\r\n          </Text>\r\n        </TouchableOpacity>\r\n      }\r\n      bottomDivider\r\n    />\r\n  );\r\n\r\n  componentDidMount() {\r\n    this.getDonorDetails(this.state.donorId);\r\n    this.getAllDonations();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.requestRef();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <View style={{ flex: 1 }}>\r\n        <MyHeader navigation={this.props.navigation} title=\"My Donations\" />\r\n        <View style={{ flex: 1 }}>\r\n          {this.state.allDonations.length === 0 ? (\r\n            <View style={styles.subtitle}>\r\n              <Text style={{ fontSize: 20 }}>List of all book Donations</Text>\r\n            </View>\r\n          ) : (\r\n            <FlatList\r\n              keyExtractor={this.keyExtractor}\r\n              data={this.state.allDonations}\r\n              renderItem={this.renderItem}\r\n            />\r\n          )}\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  button: {\r\n    width: 100,\r\n    height: 30,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 8,\r\n    },\r\n    elevation: 16,\r\n  },\r\n  subtitle: {\r\n    flex: 1,\r\n    fontSize: 20,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}